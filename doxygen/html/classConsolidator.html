<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>TileDB: Consolidator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TileDB
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classConsolidator-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Consolidator Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="consolidator_8h_source.html">consolidator.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator_1_1ArrayDescriptor.html">ArrayDescriptor</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structConsolidator_1_1ArrayInfo.html">ArrayInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:abb45365555fb0f3aeca0f933027ca54d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#abb45365555fb0f3aeca0f933027ca54d">Mode</a> { <b>READ</b>, 
<b>WRITE</b>
 }</td></tr>
<tr class="separator:abb45365555fb0f3aeca0f933027ca54d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b5064df8a7673a9cda8d079838309bf"><td class="memItemLeft" align="right" valign="top">typedef std::pair&lt; std::vector&lt; std::string &gt;, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#a1b5064df8a7673a9cda8d079838309bf">ConsolidationInfo</a></td></tr>
<tr class="separator:a1b5064df8a7673a9cda8d079838309bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a288ab0c18a45005d380dd70cca50227f"><td class="memItemLeft" align="right" valign="top">typedef std::pair&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#a288ab0c18a45005d380dd70cca50227f">FragmentTreeLevel</a></td></tr>
<tr class="separator:a288ab0c18a45005d380dd70cca50227f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34bc002a0189718ae47bb2e934a8300f"><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; <a class="el" href="classConsolidator.html#a288ab0c18a45005d380dd70cca50227f">FragmentTreeLevel</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#a34bc002a0189718ae47bb2e934a8300f">FragmentTree</a></td></tr>
<tr class="separator:a34bc002a0189718ae47bb2e934a8300f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab77c160cb92e14ce01e353c4b200bb74"><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; std::string, <a class="el" href="structConsolidator_1_1ArrayInfo.html">ArrayInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#ab77c160cb92e14ce01e353c4b200bb74">OpenArrays</a></td></tr>
<tr class="separator:ab77c160cb92e14ce01e353c4b200bb74"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab5bbc14d22544aeb8fd658d727b0a83d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#ab5bbc14d22544aeb8fd658d727b0a83d">Consolidator</a> ()</td></tr>
<tr class="separator:ab5bbc14d22544aeb8fd658d727b0a83d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae43ad1f95cc2a5f4213ae0ce39000bfb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#ae43ad1f95cc2a5f4213ae0ce39000bfb">Consolidator</a> (const std::string &amp;workspace, <a class="el" href="classStorageManager.html">StorageManager</a> *storage_manager)</td></tr>
<tr class="separator:ae43ad1f95cc2a5f4213ae0ce39000bfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cc440cad5930f304e6d1eb9d59a4a8d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#a6cc440cad5930f304e6d1eb9d59a4a8d">add_fragment</a> (const <a class="el" href="classConsolidator_1_1ArrayDescriptor.html">ArrayDescriptor</a> *ad) const </td></tr>
<tr class="separator:a6cc440cad5930f304e6d1eb9d59a4a8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53574b38184c4de9915a0c5912a473cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#a53574b38184c4de9915a0c5912a473cc">close_array</a> (const <a class="el" href="classConsolidator_1_1ArrayDescriptor.html">ArrayDescriptor</a> *ad)</td></tr>
<tr class="separator:a53574b38184c4de9915a0c5912a473cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a258a82dbcba2aee5b833892aa352ebe5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#a258a82dbcba2aee5b833892aa352ebe5">eagerly_consolidate</a> (const <a class="el" href="classConsolidator_1_1ArrayDescriptor.html">ArrayDescriptor</a> *ad) const </td></tr>
<tr class="separator:a258a82dbcba2aee5b833892aa352ebe5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5b25db379ea33e4cd428d6bf04fde78"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#aa5b25db379ea33e4cd428d6bf04fde78">get_all_fragment_names</a> (const <a class="el" href="classConsolidator_1_1ArrayDescriptor.html">ArrayDescriptor</a> *ad) const </td></tr>
<tr class="separator:aa5b25db379ea33e4cd428d6bf04fde78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abce80241d142f3b160ac6289ed09da59"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#abce80241d142f3b160ac6289ed09da59">get_next_fragment_name</a> (const <a class="el" href="classConsolidator_1_1ArrayDescriptor.html">ArrayDescriptor</a> *ad) const </td></tr>
<tr class="separator:abce80241d142f3b160ac6289ed09da59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2530af27e9cd8d13285591f18a9da24"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#ab2530af27e9cd8d13285591f18a9da24">get_next_update_seq</a> (const <a class="el" href="classConsolidator_1_1ArrayDescriptor.html">ArrayDescriptor</a> *ad) const </td></tr>
<tr class="separator:ab2530af27e9cd8d13285591f18a9da24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66b77f07f3db50c295a89053cbca909f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#a66b77f07f3db50c295a89053cbca909f">lazily_consolidate</a> (const <a class="el" href="classConsolidator_1_1ArrayDescriptor.html">ArrayDescriptor</a> *ad) const </td></tr>
<tr class="separator:a66b77f07f3db50c295a89053cbca909f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afce022da3083ef724772deda811d8924"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classConsolidator_1_1ArrayDescriptor.html">ArrayDescriptor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#afce022da3083ef724772deda811d8924">open_array</a> (const <a class="el" href="classArraySchema.html">ArraySchema</a> *array_schema, <a class="el" href="classConsolidator.html#abb45365555fb0f3aeca0f933027ca54d">Mode</a> mode)</td></tr>
<tr class="separator:afce022da3083ef724772deda811d8924"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a6f7c498dc3132f30422f5c434b380f96"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#a6f7c498dc3132f30422f5c434b380f96">advance_cell_its</a> (int attribute_num, <a class="el" href="classTile_1_1const__cell__iterator.html">Tile::const_cell_iterator</a> *cell_its) const </td></tr>
<tr class="separator:a6f7c498dc3132f30422f5c434b380f96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bc7c4747bfafc3dd5d70f248a869e78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#a7bc7c4747bfafc3dd5d70f248a869e78">advance_cell_tile_its</a> (int attribute_num, <a class="el" href="classTile_1_1const__cell__iterator.html">Tile::const_cell_iterator</a> *cell_its, <a class="el" href="classTile_1_1const__cell__iterator.html">Tile::const_cell_iterator</a> &amp;cell_it_end, <a class="el" href="classStorageManager_1_1const__tile__iterator.html">StorageManager::const_tile_iterator</a> *tile_its, <a class="el" href="classStorageManager_1_1const__tile__iterator.html">StorageManager::const_tile_iterator</a> &amp;tile_it_end) const </td></tr>
<tr class="separator:a7bc7c4747bfafc3dd5d70f248a869e78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af95ef33a82fe6ada770bce3191192185"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#af95ef33a82fe6ada770bce3191192185">advance_tile_its</a> (int attribute_num, <a class="el" href="classStorageManager_1_1const__tile__iterator.html">StorageManager::const_tile_iterator</a> *tile_its) const </td></tr>
<tr class="separator:af95ef33a82fe6ada770bce3191192185"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a8b7b11bbd01d50acba843cfc4884e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#a1a8b7b11bbd01d50acba843cfc4884e9">append_cell</a> (const <a class="el" href="classTile_1_1const__cell__iterator.html">Tile::const_cell_iterator</a> *cell_its, <a class="el" href="classTile.html">Tile</a> **tiles, int attribute_num) const </td></tr>
<tr class="separator:a1a8b7b11bbd01d50acba843cfc4884e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1d109b394bb64fe33a00a20805ec971"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#ab1d109b394bb64fe33a00a20805ec971">consolidate</a> (const <a class="el" href="classArraySchema.html">ArraySchema</a> *array_schema, const std::vector&lt; std::string &gt; &amp;fragment_names, const std::string &amp;result_fragment_name) const </td></tr>
<tr class="separator:ab1d109b394bb64fe33a00a20805ec971"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69d3e9df3658ab2f4254aa3dc0ec8108"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#a69d3e9df3658ab2f4254aa3dc0ec8108">consolidate_irregular</a> (const StorageManager::ArrayDescriptor *ad, const std::string &amp;result_fragment_name) const </td></tr>
<tr class="separator:a69d3e9df3658ab2f4254aa3dc0ec8108"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd735586c28babe0aa28b179a86b11da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#afd735586c28babe0aa28b179a86b11da">consolidate_regular</a> (const StorageManager::ArrayDescriptor *ad, const std::string &amp;result_fragment_name) const </td></tr>
<tr class="separator:afd735586c28babe0aa28b179a86b11da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2f5913e45b8f37830322b18ae5871b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#ab2f5913e45b8f37830322b18ae5871b0">flush_fragment_tree</a> (const std::string &amp;array_name, const <a class="el" href="classConsolidator.html#a34bc002a0189718ae47bb2e934a8300f">FragmentTree</a> &amp;fragment_tree) const </td></tr>
<tr class="separator:ab2f5913e45b8f37830322b18ae5871b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9571e0f621d3cfa2b0aaf342807c87c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#aa9571e0f621d3cfa2b0aaf342807c87c">get_next_fragment_index</a> (<a class="el" href="classStorageManager_1_1const__tile__iterator.html">StorageManager::const_tile_iterator</a> **tile_its, <a class="el" href="classStorageManager_1_1const__tile__iterator.html">StorageManager::const_tile_iterator</a> *tile_it_end, int fragment_num, <a class="el" href="classTile_1_1const__cell__iterator.html">Tile::const_cell_iterator</a> **cell_its, <a class="el" href="classTile_1_1const__cell__iterator.html">Tile::const_cell_iterator</a> *cell_it_end, const <a class="el" href="classArraySchema.html">ArraySchema</a> *array_schema, const std::string &amp;result_fragment_suffix) const </td></tr>
<tr class="separator:aa9571e0f621d3cfa2b0aaf342807c87c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9812cb72af30f36c4c76dce39656a65f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#a9812cb72af30f36c4c76dce39656a65f">initialize_cell_its</a> (const <a class="el" href="classStorageManager_1_1const__tile__iterator.html">StorageManager::const_tile_iterator</a> *tile_its, int attribute_num, <a class="el" href="classTile_1_1const__cell__iterator.html">Tile::const_cell_iterator</a> *cell_its, <a class="el" href="classTile_1_1const__cell__iterator.html">Tile::const_cell_iterator</a> &amp;cell_it_end) const </td></tr>
<tr class="separator:a9812cb72af30f36c4c76dce39656a65f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a321eaa28e6eef39347a7dd469a1f1d13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#a321eaa28e6eef39347a7dd469a1f1d13">initialize_tile_its</a> (const StorageManager::FragmentDescriptor *fd, <a class="el" href="classStorageManager_1_1const__tile__iterator.html">StorageManager::const_tile_iterator</a> *tile_its, <a class="el" href="classStorageManager_1_1const__tile__iterator.html">StorageManager::const_tile_iterator</a> &amp;tile_it_end) const </td></tr>
<tr class="separator:a321eaa28e6eef39347a7dd469a1f1d13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad00eed0ca84677fcdeda975b37be93b5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#ad00eed0ca84677fcdeda975b37be93b5">is_del</a> (const <a class="el" href="classTile_1_1const__cell__iterator.html">Tile::const_cell_iterator</a> &amp;cell_it) const </td></tr>
<tr class="separator:ad00eed0ca84677fcdeda975b37be93b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb947d583e3da9423af47f3d1d23410f"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#acb947d583e3da9423af47f3d1d23410f">load_fragment_tree</a> (const <a class="el" href="classArraySchema.html">ArraySchema</a> *array_schema, <a class="el" href="classConsolidator.html#a34bc002a0189718ae47bb2e934a8300f">FragmentTree</a> &amp;fragment_tree) const </td></tr>
<tr class="separator:acb947d583e3da9423af47f3d1d23410f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2a9f07afe605f056275a0b715d8ba2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#ab2a9f07afe605f056275a0b715d8ba2f">new_tiles</a> (const <a class="el" href="classArraySchema.html">ArraySchema</a> *array_schema, int64_t tile_id, <a class="el" href="classTile.html">Tile</a> **tiles) const </td></tr>
<tr class="separator:ab2a9f07afe605f056275a0b715d8ba2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16b1b72ed44a26af099625daaecc0ed0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#a16b1b72ed44a26af099625daaecc0ed0">path_exists</a> (const std::string &amp;path) const </td></tr>
<tr class="separator:a16b1b72ed44a26af099625daaecc0ed0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bc0be6c1848619357f35be213ede0ba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#a9bc0be6c1848619357f35be213ede0ba">set_workspace</a> (const std::string &amp;path)</td></tr>
<tr class="separator:a9bc0be6c1848619357f35be213ede0ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bbf91a4a1ef6603fe28744265d98e7f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#a7bbf91a4a1ef6603fe28744265d98e7f">store_tiles</a> (const StorageManager::FragmentDescriptor *fd, <a class="el" href="classTile.html">Tile</a> **tiles) const </td></tr>
<tr class="separator:a7bbf91a4a1ef6603fe28744265d98e7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a3a86f55ce360cefaa78c89fead0e96d8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classConsolidator.html#ab77c160cb92e14ce01e353c4b200bb74">OpenArrays</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#a3a86f55ce360cefaa78c89fead0e96d8">open_arrays_</a></td></tr>
<tr class="separator:a3a86f55ce360cefaa78c89fead0e96d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ab47b31c28e86b2f5b1293e19358c73"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStorageManager.html">StorageManager</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#a7ab47b31c28e86b2f5b1293e19358c73">storage_manager_</a></td></tr>
<tr class="separator:a7ab47b31c28e86b2f5b1293e19358c73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68b0628a61ce528daa6d1c2bf07e033d"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#a68b0628a61ce528daa6d1c2bf07e033d">workspace_</a></td></tr>
<tr class="separator:a68b0628a61ce528daa6d1c2bf07e033d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:ac36df9d9877c7ccf4c874fc912fffe69"><td class="memItemLeft" align="right" valign="top">static int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConsolidator.html#ac36df9d9877c7ccf4c874fc912fffe69">array_info_id_</a></td></tr>
<tr class="separator:ac36df9d9877c7ccf4c874fc912fffe69"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The consolidator is responsible for merging 'array fragments'. The rationale behind the array fragments is the following. When data are loaded into the array for the first time, a new array fragment is created. This is a fully functional TileDB array, which abides by a praticular array schema (see also <a class="el" href="classArraySchema.html">ArraySchema</a>). Updates to an array come in batches. Each update batch creates a new array fragment. We will hereadter distinguish between terms 'array' and 'fragment'; an array has a unique name (using which the user may invoke update and query operations), but at any given instance it may be comprised of multiple array fragments. Each array fragment is named after the batches it encompasses (more on this below). The consolidator is enforced with occassionally merging a set of array fragments into a single one, based on a parameter called 'consolidation step'. The latter is stored in the array schema, i.e., it is specific to the array. The consolidation takes place in a hierarchical manner, conceptually visualized as a tree, called 'fragment tree'. The <a class="el" href="classConsolidator.html">Consolidator</a> encodes the tree in a concise manner (more on this below).</p>
<p>The consolidation works as follows. Let C denote the consolidation step. Imagine a complete C-ary tree structure, where each node is initially colored white and represents nothing. When a new fragment is created, the left-most leaf node (at level 0) is colored grey and represents this new fragment. After C fragment insertions the C left-most leaves become grey. The consolidator then merges the C fragments into a single one, colors as grey the parent at level 1 of the respective leaves, and colors black the leaves. The grey node at level 1 represents the newly created fragment. Its (now black) children are completely disregarded from now on. When a new fragment arrives, the first leaf (at level 0) on the right of the grey node at level 1 becomes grey and represents the new fragment. The process continues until there are c leaves with the same parent, and then the consolidator merges these leaves, colors them black (i.e., disregards them) and colors their parents grey. Assume that that the process continues until there are C-1 grey nodes at level 1, and C-1 grey nodes at level 0. Also assume that a new fragment is inserted. The consolidator merges the C leaf fragments creating the C-th grey node at level 1. At this point the consolidator must continue recursively and merge the C level-1 fragments, creating a grey node at level 2 and coloring the C nodes at level 1 as black. The process continues in the same fashion. This algorithm, for C&gt;1, leads to an amortized logarithmic update cost. For C=1, the algorithm always consolidates the newly incoming batch with the (single) current fragment.</p>
<p>The <a class="el" href="classConsolidator.html">Consolidator</a> encodes the merge tree in a very simple manner, storing essentially only the grey nodes. Specifically, it stores a vector of pairs (level, number of grey nodes at this level). The pairs in the vector are in non-increasing order of first element (i.e., level). Moreover, there may be up to C-1 nodes per level.</p>
<p>Note that, upon consolidating fragments, a cell on the same coordinates may appear in multiple fragments. In that case, the cell of the latest (i.e., most recent) fragment will be appended to the consolidated fragment. Moreover, a deletion is represented by a cell that has valid coordinate values, but all its attribute values have special NULL values.</p>
<p>A final remark concerns the names of the fragments. There is a sequence of increasing update numbers (starting from 0), which indicates when an udpate took place. Every fragment gets its name after the range of updates it encompasses. For instance, the very first fragment is called "0_0", indicating that it encompasses only the first update. After merging the first 3 fragments (e.g., in case C=3), the resulting fragment gets name "0_2", indicating that it covers updates 0, 1 and 2. Merging fragments "0_2", "3_5" and "6_8", the resulting fragment is named "0_8". </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a1b5064df8a7673a9cda8d079838309bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::pair&lt;std::vector&lt;std::string&gt;, std::string&gt; <a class="el" href="classConsolidator.html#a1b5064df8a7673a9cda8d079838309bf">Consolidator::ConsolidationInfo</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mnemonic: (vector of fragment names, result fragment name) </p>

</div>
</div>
<a class="anchor" id="a34bc002a0189718ae47bb2e934a8300f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="classConsolidator.html#a288ab0c18a45005d380dd70cca50227f">FragmentTreeLevel</a>&gt; <a class="el" href="classConsolidator.html#a34bc002a0189718ae47bb2e934a8300f">Consolidator::FragmentTree</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Menmonic &lt;(level, number of nodes), ...&gt; </p>

</div>
</div>
<a class="anchor" id="a288ab0c18a45005d380dd70cca50227f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::pair&lt;int, int&gt; <a class="el" href="classConsolidator.html#a288ab0c18a45005d380dd70cca50227f">Consolidator::FragmentTreeLevel</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mnemonic: (level, number of nodes) </p>

</div>
</div>
<a class="anchor" id="ab77c160cb92e14ce01e353c4b200bb74"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;std::string, <a class="el" href="structConsolidator_1_1ArrayInfo.html">ArrayInfo</a>&gt; <a class="el" href="classConsolidator.html#ab77c160cb92e14ce01e353c4b200bb74">Consolidator::OpenArrays</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Menmonic [array_name] &ndash;&gt; array_info </p>

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="abb45365555fb0f3aeca0f933027ca54d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classConsolidator.html#abb45365555fb0f3aeca0f933027ca54d">Consolidator::Mode</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>An array can be opened in READ or WRITE mode. In WRITE mode, the fragment book-keeping info may be updated, whereas in READ mode it cannot. </p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ab5bbc14d22544aeb8fd658d727b0a83d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Consolidator::Consolidator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Empty constructor. </p>

</div>
</div>
<a class="anchor" id="ae43ad1f95cc2a5f4213ae0ce39000bfb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Consolidator::Consolidator </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>workspace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classStorageManager.html">StorageManager</a> *&#160;</td>
          <td class="paramname"><em>storage_manager</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Simple constructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a6cc440cad5930f304e6d1eb9d59a4a8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Consolidator::add_fragment </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classConsolidator_1_1ArrayDescriptor.html">ArrayDescriptor</a> *&#160;</td>
          <td class="paramname"><em>ad</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates the fragment information about this array, and performs consolidation if necessary. </p>

</div>
</div>
<a class="anchor" id="a6f7c498dc3132f30422f5c434b380f96"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Consolidator::advance_cell_its </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>attribute_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTile_1_1const__cell__iterator.html">Tile::const_cell_iterator</a> *&#160;</td>
          <td class="paramname"><em>cell_its</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Advances all the cell iterators by 1. </p>

</div>
</div>
<a class="anchor" id="a7bc7c4747bfafc3dd5d70f248a869e78"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Consolidator::advance_cell_tile_its </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>attribute_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTile_1_1const__cell__iterator.html">Tile::const_cell_iterator</a> *&#160;</td>
          <td class="paramname"><em>cell_its</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTile_1_1const__cell__iterator.html">Tile::const_cell_iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>cell_it_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classStorageManager_1_1const__tile__iterator.html">StorageManager::const_tile_iterator</a> *&#160;</td>
          <td class="paramname"><em>tile_its</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classStorageManager_1_1const__tile__iterator.html">StorageManager::const_tile_iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>tile_it_end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Advances all the cell iterators by 1. If the cell iterators are equal to the end iterator, the tile iterators are advanced. If the tile iterators are not equal to the end tile iterator, then new cell iterators are initialized. </p>

</div>
</div>
<a class="anchor" id="af95ef33a82fe6ada770bce3191192185"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Consolidator::advance_tile_its </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>attribute_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classStorageManager_1_1const__tile__iterator.html">StorageManager::const_tile_iterator</a> *&#160;</td>
          <td class="paramname"><em>tile_its</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Advances all the tile iterators by 1. </p>

</div>
</div>
<a class="anchor" id="a1a8b7b11bbd01d50acba843cfc4884e9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Consolidator::append_cell </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTile_1_1const__cell__iterator.html">Tile::const_cell_iterator</a> *&#160;</td>
          <td class="paramname"><em>cell_its</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTile.html">Tile</a> **&#160;</td>
          <td class="paramname"><em>tiles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>attribute_num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Appends a logical cell of an array (comprised of attribute values and coordinates held in the input cell iterators) into another array (in the corresponding tiles held in input variable 'tiles'). </p>

</div>
</div>
<a class="anchor" id="a53574b38184c4de9915a0c5912a473cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Consolidator::close_array </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classConsolidator_1_1ArrayDescriptor.html">ArrayDescriptor</a> *&#160;</td>
          <td class="paramname"><em>ad</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>It deletes the book-keeping consolidation info of an array from memory. </p>

</div>
</div>
<a class="anchor" id="ab1d109b394bb64fe33a00a20805ec971"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Consolidator::consolidate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classArraySchema.html">ArraySchema</a> *&#160;</td>
          <td class="paramname"><em>array_schema</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>fragment_names</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>result_fragment_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Consolidates the input fragments. </p>

</div>
</div>
<a class="anchor" id="a69d3e9df3658ab2f4254aa3dc0ec8108"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Consolidator::consolidate_irregular </td>
          <td>(</td>
          <td class="paramtype">const StorageManager::ArrayDescriptor *&#160;</td>
          <td class="paramname"><em>ad</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>result_fragment_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Consolidates the input fragments for the case of irregular tiles. </p>

</div>
</div>
<a class="anchor" id="afd735586c28babe0aa28b179a86b11da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Consolidator::consolidate_regular </td>
          <td>(</td>
          <td class="paramtype">const StorageManager::ArrayDescriptor *&#160;</td>
          <td class="paramname"><em>ad</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>result_fragment_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Consolidates the input fragments for the case of regular tiles. </p>

</div>
</div>
<a class="anchor" id="a258a82dbcba2aee5b833892aa352ebe5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Consolidator::eagerly_consolidate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classConsolidator_1_1ArrayDescriptor.html">ArrayDescriptor</a> *&#160;</td>
          <td class="paramname"><em>ad</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Eager consolidation when the consolidation step is equal to 1. It consolidates every new fragment with the current (single) one. </p>

</div>
</div>
<a class="anchor" id="ab2f5913e45b8f37830322b18ae5871b0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Consolidator::flush_fragment_tree </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>array_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classConsolidator.html#a34bc002a0189718ae47bb2e934a8300f">FragmentTree</a> &amp;&#160;</td>
          <td class="paramname"><em>fragment_tree</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flushes the fragment tree of an array to the disk. </p>

</div>
</div>
<a class="anchor" id="aa5b25db379ea33e4cd428d6bf04fde78"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; Consolidator::get_all_fragment_names </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classConsolidator_1_1ArrayDescriptor.html">ArrayDescriptor</a> *&#160;</td>
          <td class="paramname"><em>ad</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the name corresponding to all existing array fragments. </p>

</div>
</div>
<a class="anchor" id="aa9571e0f621d3cfa2b0aaf342807c87c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Consolidator::get_next_fragment_index </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classStorageManager_1_1const__tile__iterator.html">StorageManager::const_tile_iterator</a> **&#160;</td>
          <td class="paramname"><em>tile_its</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classStorageManager_1_1const__tile__iterator.html">StorageManager::const_tile_iterator</a> *&#160;</td>
          <td class="paramname"><em>tile_it_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fragment_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTile_1_1const__cell__iterator.html">Tile::const_cell_iterator</a> **&#160;</td>
          <td class="paramname"><em>cell_its</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTile_1_1const__cell__iterator.html">Tile::const_cell_iterator</a> *&#160;</td>
          <td class="paramname"><em>cell_it_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classArraySchema.html">ArraySchema</a> *&#160;</td>
          <td class="paramname"><em>array_schema</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>result_fragment_suffix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the index of the fragment from which we will get the next cell. </p>

</div>
</div>
<a class="anchor" id="abce80241d142f3b160ac6289ed09da59"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string Consolidator::get_next_fragment_name </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classConsolidator_1_1ArrayDescriptor.html">ArrayDescriptor</a> *&#160;</td>
          <td class="paramname"><em>ad</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the next fragment name. </p>

</div>
</div>
<a class="anchor" id="ab2530af27e9cd8d13285591f18a9da24"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t Consolidator::get_next_update_seq </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classConsolidator_1_1ArrayDescriptor.html">ArrayDescriptor</a> *&#160;</td>
          <td class="paramname"><em>ad</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the next update sequence number. </p>

</div>
</div>
<a class="anchor" id="a9812cb72af30f36c4c76dce39656a65f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Consolidator::initialize_cell_its </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classStorageManager_1_1const__tile__iterator.html">StorageManager::const_tile_iterator</a> *&#160;</td>
          <td class="paramname"><em>tile_its</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>attribute_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTile_1_1const__cell__iterator.html">Tile::const_cell_iterator</a> *&#160;</td>
          <td class="paramname"><em>cell_its</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTile_1_1const__cell__iterator.html">Tile::const_cell_iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>cell_it_end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initializes cell iterators. </p>

</div>
</div>
<a class="anchor" id="a321eaa28e6eef39347a7dd469a1f1d13"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Consolidator::initialize_tile_its </td>
          <td>(</td>
          <td class="paramtype">const StorageManager::FragmentDescriptor *&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classStorageManager_1_1const__tile__iterator.html">StorageManager::const_tile_iterator</a> *&#160;</td>
          <td class="paramname"><em>tile_its</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classStorageManager_1_1const__tile__iterator.html">StorageManager::const_tile_iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>tile_it_end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initializes tile iterators. </p>

</div>
</div>
<a class="anchor" id="ad00eed0ca84677fcdeda975b37be93b5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Consolidator::is_del </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTile_1_1const__cell__iterator.html">Tile::const_cell_iterator</a> &amp;&#160;</td>
          <td class="paramname"><em>cell_it</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns true if the cell represents a deletion. </p>

</div>
</div>
<a class="anchor" id="a66b77f07f3db50c295a89053cbca909f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Consolidator::lazily_consolidate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classConsolidator_1_1ArrayDescriptor.html">ArrayDescriptor</a> *&#160;</td>
          <td class="paramname"><em>ad</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lazy consolidation, when the consolidation step is greater than 1. </p>

</div>
</div>
<a class="anchor" id="acb947d583e3da9423af47f3d1d23410f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t Consolidator::load_fragment_tree </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classArraySchema.html">ArraySchema</a> *&#160;</td>
          <td class="paramname"><em>array_schema</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classConsolidator.html#a34bc002a0189718ae47bb2e934a8300f">FragmentTree</a> &amp;&#160;</td>
          <td class="paramname"><em>fragment_tree</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Loads the fragment tree of an array from the disk, and returns the next sequnce number to be assigned to a new fragment. </p>

</div>
</div>
<a class="anchor" id="ab2a9f07afe605f056275a0b715d8ba2f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Consolidator::new_tiles </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classArraySchema.html">ArraySchema</a> *&#160;</td>
          <td class="paramname"><em>array_schema</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>tile_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTile.html">Tile</a> **&#160;</td>
          <td class="paramname"><em>tiles</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates an array of <a class="el" href="classTile.html">Tile</a> objects with the input tile id based on the input array schema. </p>

</div>
</div>
<a class="anchor" id="afce022da3083ef724772deda811d8924"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classConsolidator_1_1ArrayDescriptor.html">ArrayDescriptor</a>* Consolidator::open_array </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classArraySchema.html">ArraySchema</a> *&#160;</td>
          <td class="paramname"><em>array_schema</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classConsolidator.html#abb45365555fb0f3aeca0f933027ca54d">Mode</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>It loads the book-keeping consolidation info for an array into memory. </p>

</div>
</div>
<a class="anchor" id="a16b1b72ed44a26af099625daaecc0ed0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Consolidator::path_exists </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns true if the input path is an existing directory. </p>

</div>
</div>
<a class="anchor" id="a9bc0be6c1848619357f35be213ede0ba"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Consolidator::set_workspace </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Simply sets the workspace. </p>

</div>
</div>
<a class="anchor" id="a7bbf91a4a1ef6603fe28744265d98e7f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Consolidator::store_tiles </td>
          <td>(</td>
          <td class="paramtype">const StorageManager::FragmentDescriptor *&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTile.html">Tile</a> **&#160;</td>
          <td class="paramname"><em>tiles</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sends the input tiles to the storage manager. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ac36df9d9877c7ccf4c874fc912fffe69"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t Consolidator::array_info_id_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Used in <a class="el" href="structConsolidator_1_1ArrayInfo.html">ArrayInfo</a> and <a class="el" href="classConsolidator_1_1ArrayDescriptor.html">ArrayDescriptor</a> for debugging purposes. </p>

</div>
</div>
<a class="anchor" id="a3a86f55ce360cefaa78c89fead0e96d8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classConsolidator.html#ab77c160cb92e14ce01e353c4b200bb74">OpenArrays</a> Consolidator::open_arrays_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Keeps track the arrays whose book-keeping info is in memory. </p>

</div>
</div>
<a class="anchor" id="a7ab47b31c28e86b2f5b1293e19358c73"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStorageManager.html">StorageManager</a>* Consolidator::storage_manager_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The <a class="el" href="classStorageManager.html">StorageManager</a> object the <a class="el" href="classConsolidator.html">Consolidator</a> will be interfacing with. </p>

</div>
</div>
<a class="anchor" id="a68b0628a61ce528daa6d1c2bf07e033d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string Consolidator::workspace_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>A folder in the disk where the <a class="el" href="classConsolidator.html">Consolidator</a> creates all its data. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>core/include/<a class="el" href="consolidator_8h_source.html">consolidator.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Apr 7 2015 16:57:46 for TileDB by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
