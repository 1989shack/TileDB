Content-type: text/html

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of tiledb_define_array</TITLE>
</HEAD><BODY>
<H1>tiledb_define_array</H1>
Section: TileDB programs (1)<BR>Updated: 24 June 2015<BR><A HREF="#index">Index</A>
<A HREF="/cgi-bin/man/man2html">Return to Main Contents</A><HR>

<BR>&nbsp;
<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

tiledb_define_array - defines an array, specifying an array schema
<P>
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>tiledb_define_array </B>

<B>-w </B><I>directory </I><B>-A </B><I>array_name </I><B>-a </B><I>attribute_name_1,... </I><B>-d </B><I>dim_name_1,... </I>

<BR>

<B>-D </B><I>dim_domain_1_low,dim_domain_1_high,... </I><B>-t </B><I>type_1,... </I>

[
<B>-o </B><I>cell_order</I>

] [
<B>-s </B><I>consolidation_step</I>

] 
<BR>

[ [ [
<B>-e </B><I>tile_extent_1,...</I>

] [
<B>-O </B><I>tile_order</I>

] ] | 
[ 
<B>-c </B><I>capacity</I>

] ]
<P>
<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<B>tiledb_define_array</B>

defines an array, specifying its schema. Every array must be defined prior to
its use. On error, it prints appopriate messages on stderr and returns an error 
code (see <B>EXIT STATUS</B>).
<P>
Each array is comprised of a set of <B>dimensions</B>, and a set of 
<B>attributes</B>. Each array <B>cell</B> is essentially a tuple, consisting of a
set of dimension values, collectively called as <I>coordinates</I>, and a set of
attribute values. The coordinates and attribute values may be of different
<B>types</B>. All coordinates though must have the same type. The 
coordinates draw their values from their corresponding <B>dimension domains</B>.
A cell may have <I>multiple</I> (fixed or variable) values on each
attribute. TileDB stores internally only the <I>non-empty</I> (i.e., non-null,
non-zero) cells. 
<P>
An array is internally represented as a set of <B>fragments</B> (i.e., snapshots
of the array after a set of updates), each consisting of a set of <B>tiles</B>. 
Each tile is essentially a <I>hyper-rectangle</I> in the <I>logical</I> (i.e., 
dimension) space that groups a set of non-empty cells. The tiles of an
array may be <I>regular</I> or <I>irregular</I>. Regular tiles have <I>fixed</I>
<B>tile extents</B> across each dimension, i.e., they have the same shape in the,
logical space, but may have a different non-empty cell <B>capacity</B>.
Irregular tiles have a <I>fixed</I> non-empty cell capacity, but may have 
different <I>shape</I> in the logical space.
<P>
Each array stores its cells internally in a <I>sorted</I> <B>tile order</B> and 
<B>cell order</B>. For the case of irregular tiles, the tile order is implied
by the cell order. 
<P>
Finally, TileDB updates arrays in <I>batches</I>, i.e., it modifies 
<I>sets of cells</I> instead of single cells. When a new
set of cells is inserted into an array, TileDB initially creates a new
array <B>fragment</B> encompassing only the updates. Periodically, as new
updates arrive, TileDB <B>consolidates</B> multiple fragments into a single one.
The consolidation frequency is defined by a <B>consolidation step</B> parameter.
If this parameter is 1, every new fragment is always consolidated with the
existing one. If it is larger than 1, then consolidation occurs in a 
<I>hierarchical</I> manner. For instance, if <B>s</B> is the consolidation step,
each new fragment essentially represents a leaf of a complete <B>s</B>-ary 
tree that is constructed bottom-up. When <B>s</B> fragment-leaves are created,
they are consolidated into a single one, which becomes their parent node
in the tree, and the leaves are disregarded for the rest of they system
lifetime. In general, whenever <B>s</B> fragment-nodes are created at the
same level, they are consolidated into a new fragment that becomes
their parent, and these nodes are disregarded thereafter.
<P>
The following conventions apply to the <B>SYNOPSIS</B> section:
<P>
<TABLE>
<TR VALIGN=top><TD ALIGN=center><B>bold text</B> </TD><TD> type exactly as shown<BR></TD></TR>
<TR VALIGN=top><TD ALIGN=center><I>italic text</I> </TD><TD> replace with appropriate argument<BR></TD></TR>
<TR VALIGN=top><TD ALIGN=center>[<B>-a </B><I>arg</I>]</TD><TD> any or all options within [ ] are optional<BR></TD></TR>
<TR VALIGN=top><TD ALIGN=center><B>-a </B><I>arg</I> | <B>-b </B><I>arg</I> </TD><TD> options delimited by | cannot be used together<BR></TD></TR>
</TABLE>

<BR>&nbsp;
<A NAME="lbAE">&nbsp;</A>
<H2>OPTIONS</H2>

<DL COMPACT>
<DT><B>-w</B><I> directory</I><B></B>, <I></I><B>--workspace=</B><I>directory</I>

<DD>
The path to the workspace folder where the TileDB data will be stored. The path
must exist, and the caller must have read and write permissions on it.
<P>
<DT><B>-A</B><I> array_name</I><B></B>, <I></I><B>--array-name=</B><I>array_name</I>

<DD>
The name of the array whose schema is being defined. It can contain only
alphanumerics and character '_'. 
<P>
<DT><B>-a</B><I> attribute_name_1,...</I><B></B>, <I></I><B>--attribute-names=</B><I>attribute_name_1,...</I>

<DD>
The names of the attributes of the array. They can contain only
alphanumerics and character '_'. 
<P>
<DT><B>-d</B><I> dim_name_1,...</I><B></B>, <I></I><B>--dim-names=</B><I>dim_name_1,...</I>

<DD>
The names of the dimensions of the array. They can contain only
alphanumerics and character '_'. 
<P>
<DT><B>-D</B><I> dim_domain_1_low,dim_domain_1_high,...</I><B></B>, <I></I><B>--dim-domains=</B><I>dim_domain_1_low,dim_domain_1_high,...</I>

<DD>
The domains of the dimensions. There should be a [low,high] pair for
every dimension, whose order must follow that of the dimension names
in the <B>-d</B> option. 
<P>
<DT><B>-t</B><I> type_1,...</I><B></B>, <I></I><B>--types=</B><I>type_1,...</I>

<DD>
The types of the attributes and (collectively) of the coordinates. Specifically,
if there are <I>attribute_num</I> attributes, there should be provided 
<I>attribute_num+1</I> types. The types of the attributes must be given
first, following the order of the attribute names in the <B>-a</B> option.
The type of the coordinates must be appear last. The supported attribute
types are <B>char</B>, <B>int</B>, <B>int64</B>, <B>float</B>, and <B>double</B>.
The supported coordinate types are <B>int</B>, <B>int64</B>, <B>float</B>, and 
<B>double</B>. 
<P>
Optionally, one may specify the number of values to be stored for a particular
attribute in each cell. This is done by appending '<B>:</B>' followed by the 
desired number of values after the type (e.g., <B>int:3</B>). If no such value is
provided, the default is 1. If one needs to specify that an attribute may
take a variable (unknown a priori) number of values, '<B>:var</B>' must
be appended after the type (e.g., <B>int:var</B>). Note that the dimension
type cannot have multiple values; a single set of coordinates uniquely 
identifies each cell.
<P>
<DT><B>-e</B><I> tile_extent_1,...</I><B></B>, <I></I><B>--tile_extents=</B><I>tile_extent_1,...</I>

<DD>
It specifies the extent of a tile across each dimension. If this option is
included, then the array will have <I>regular</I> tiles; if it is omitted, the
array will have <I>irregular</I> tiles. If there are <I>dim_num</I> dimensions,
there should be provided <I>dim_num</I> tile extents, following the same order
as that of the dimension names in the <B>-d</B> option. Each tile extent must
be a non-negative real number that does not exceed the corresponding domain 
size.
<P>
<DT><B>-o</B><I> cell_order</I><B></B>, <I></I><B>--cell_order=</B><I>cell_order</I>

<DD>
The order in which the cells will be stored internally. The supported orders
are <B>row-major</B>, <B>column-major</B> and <B>hilbert</B> (i.e., following
the Hilbert space-filling curve). If no cell order is provided, the default
is <B>row-major</B>.  
<P>
<DT><B>-O</B><I> tile_order</I><B></B>, <I></I><B>--tile_order=</B><I>tile_order</I>

<DD>
The order in which the tiles will be stored internally. The supported orders
are <B>row-major</B>, <B>column-major</B> and <B>hilbert</B> (i.e., following
the Hilbert space-filling curve). If no cell order is provided, the default
is <B>row-major</B>. This is applicable only to regular tiles.
<P>
<DT><B>-c</B><I> capacity</I><B></B>, <I></I><B>--capacity=</B><I>capacity</I>

<DD>
This specifies the fixed number of non-empty cells stored in each tile. It
is applicable only to irregular tiles and, hence, cannot be used together
with options <B>-e</B> and <B>-O</B>. If it is not provided, a default
value is used. 
<P>
<DT><B>-s</B><I> consolidation_step</I><B></B>, <I></I><B>--consolidation_step=</B><I>consolidation_step</I>

<DD>
It specifies the frequency of fragment consolidation, described in section 
<B>DESCRIPTION</B>. If it is not provided, the default is 1.
<P>
</DL>
<A NAME="lbAF">&nbsp;</A>
<H2>EXAMPLES</H2>

<DL COMPACT>
<DT><B>tiledb_define_array</B> \ <DD>
<BR>&nbsp;&nbsp;&nbsp;&nbsp;<B>-w&nbsp;</B>my_workspace/&nbsp;\
<BR>&nbsp;&nbsp;&nbsp;&nbsp;<B>-A&nbsp;</B>my_array&nbsp;\
<BR>&nbsp;&nbsp;&nbsp;&nbsp;<B>-a&nbsp;</B>attr1,attr2,attr3&nbsp;\
<BR>&nbsp;&nbsp;&nbsp;&nbsp;<B>-d&nbsp;</B>dim1,dim2&nbsp;\
<BR>&nbsp;&nbsp;&nbsp;&nbsp;<B>-D&nbsp;</B>0,100,0,200&nbsp;\
<BR>&nbsp;&nbsp;&nbsp;&nbsp;<B>-t&nbsp;</B>int:3,double,char:var,int64&nbsp;\
<BR>&nbsp;&nbsp;&nbsp;&nbsp;<B>-o&nbsp;</B>hilbert&nbsp;\
<BR>&nbsp;&nbsp;&nbsp;&nbsp;<B>-c&nbsp;</B>1000&nbsp;\
<BR>&nbsp;&nbsp;&nbsp;&nbsp;<B>-s&nbsp;</B>5
<P>
This defines array <I>my_array</I> in workspace folder <I>my_workspace</I>. The
array has <I>3</I> attributes and <I>2</I> dimensions. Dimension <I>dim1</I> has 
domain <I>[0,100]</I>, <I>dim2</I> has domain <I>[0,200]</I>. The coordinates are
of type <B>int64</B>. Attribute <I>attr1</I> is of type <B>int</B>, and each
cell always stores <I>3</I> values on this attribute. Attribute <I>attr2</I> is 
of type <B>double</B>, and each cell always stores <I>1</I> value on this 
attribute. Attribute <I>attr3</I> is of type <B>char</B>, and each
cell stores a <I>variable</I> number of values on this attribute (i.e., it stores
arbitrary character strings). The array has <I>irregular</I> tiles.
The cell order is <B>hilbert</B>. Each tile
accommodates exactly <I>1000</I> (non-empty) cells. Finally, the consolidation
step is set to <I>5</I>.
<P>
<DT><B>tiledb_define_array</B> \ <DD>
<BR>&nbsp;&nbsp;&nbsp;&nbsp;<B>-w&nbsp;</B>my_workspace/&nbsp;\
<BR>&nbsp;&nbsp;&nbsp;&nbsp;<B>-A&nbsp;</B>my_array&nbsp;\
<BR>&nbsp;&nbsp;&nbsp;&nbsp;<B>-a&nbsp;</B>attr1,attr2,attr3&nbsp;\
<BR>&nbsp;&nbsp;&nbsp;&nbsp;<B>-d&nbsp;</B>dim1,dim2&nbsp;\
<BR>&nbsp;&nbsp;&nbsp;&nbsp;<B>-D&nbsp;</B>0,100,0,200&nbsp;\
<BR>&nbsp;&nbsp;&nbsp;&nbsp;<B>-e&nbsp;</B>10,20&nbsp;\
<BR>&nbsp;&nbsp;&nbsp;&nbsp;<B>-t&nbsp;</B>int:3,double,char:var,int64&nbsp;\
<BR>&nbsp;&nbsp;&nbsp;&nbsp;<B>-O&nbsp;</B>row-major&nbsp;\
<BR>&nbsp;&nbsp;&nbsp;&nbsp;<B>-o&nbsp;</B>hilbert&nbsp;\
<BR>&nbsp;&nbsp;&nbsp;&nbsp;<B>-s&nbsp;</B>5
<P>
This is similar to the previous example, but now the array has <I>regular</I> 
tiles. In detail, it defines array <I>my_array</I> in workspace folder 
<I>my_workspace</I>. The array has <I>3</I> attributes and <I>2</I> dimensions. 
Dimension <I>dim1</I> has domain <I>[0,100]</I>, <I>dim2</I> has domain
<I>[0,200]</I>. The coordinates are of type <B>int64</B>. Attribute <I>attr1</I> is
of type <B>int</B>, and each cell always stores <I>3</I> values on this 
attribute. Attribute <I>attr2</I> is of type <B>double</B>, and each cell always 
stores <I>1</I> value on this attribute. Attribute <I>attr3</I> is of type 
<B>char</B>, and each cell stores a <I>variable</I> number of values on this 
attribute (i.e., it stores arbitrary character strings). The array has
<I>regular</I> tiles. Each tile has (logical) size <I>10x20</I>. The tile order is
<B>row-major</B>, whereas the cell order is <B>hilbert</B>. Finally, the 
consolidation step is set to <I>5</I>.
<P>
</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>EXIT STATUS</H2>

<DL COMPACT>
<DT><B>0</B>

<DD>
Successful execution
<DT><B>-1</B>

<DD>
Parser error
<DT><B>-7</B>

<DD>
TileDB initialization failed
<DT><B>-8</B>

<DD>
TileDB finalization failed
<DT><B>-9</B>

<DD>
Failed to parse array schema
<P>
</DL>
<A NAME="lbAH">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="/cgi-bin/man/man2html?1+tiledb_show_array_schema">tiledb_show_array_schema</A></B>(1)

<P>
<A NAME="lbAI">&nbsp;</A>
<H2>AUTHOR</H2>

Stavros Papadopoulos &lt;<A HREF="http://people.csail.mit.edu/stavrosp">http://people.csail.mit.edu/stavrosp</A>&gt;, Copyright (c) 2015
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">OPTIONS</A><DD>
<DT><A HREF="#lbAF">EXAMPLES</A><DD>
<DT><A HREF="#lbAG">EXIT STATUS</A><DD>
<DT><A HREF="#lbAH">SEE ALSO</A><DD>
<DT><A HREF="#lbAI">AUTHOR</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 21:52:58 GMT, June 29, 2015
</BODY>
</HTML>
